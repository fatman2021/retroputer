<!DOCTYPE html>
<html>

<head>
  <meta name="description" content="An 8-bit retro-emulator in JavaScript">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,minimum-scale=1">
  <title>Retroputer</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <script src="dist/bundle.js" defer></script>
</head>

<body>
  <script defer>
    window.onerror = function (...args) {
      window.log(JSON.stringify(args));
    }
  </script>
  <div id="ui" class="horizontal panel">
    <div class="main vertical panel">
      <div class="screen-panel vertical panel" id="screen-border">
        <button class="maximize" data-cmd="panel-cmd" data-parm="maximize">^</button>
        <button class="minimize" data-cmd="panel-cmd" data-parm="minimize">v</button>
        <button class="normalize" data-cmd="panel-cmd" data-parm="normalize">=</button>
        <div class="title">Screen</div>
        <canvas id="screen"></canvas>
        <div id="stats"></div>
      </div>
      <div class="bottom-panel collapsible horizontal panel">
        <div class="collapsible log-panel vertical panel">
          <button class="maximize" data-cmd="panel-cmd" data-parm="maximize">^</button>
          <button class="minimize" data-cmd="panel-cmd" data-parm="minimize">v</button>
          <button class="normalize" data-cmd="panel-cmd" data-parm="normalize">=</button>
          <div class="title">Log</div>
          <div id="log" class="scrollingpre"></div>
        </div>
        <div class="callapsible cpu-panel vertical panel">
          <button class="maximize" data-cmd="panel-cmd" data-parm="maximize">^</button>
          <button class="minimize" data-cmd="panel-cmd" data-parm="minimize">v</button>
          <button class="normalize" data-cmd="panel-cmd" data-parm="normalize">=</button>
          <div class="title">CPU</div>
          <div id="cpu">
            <table>
              <tr>
                <td>A</td>
                <td id="reg-A"></td>
                <td>X</td>
                <td id="reg-X"></td>
                <td>SB</td>
                <td id="reg-SB"></td>
              </tr>
              <tr>
                <td>B</td>
                <td id="reg-B"></td>
                <td>Y</td>
                <td id="reg-Y"></td>
                <td>DB</td>
                <td id="reg-DB"></td>
              </tr>
              <tr>
                <td>C</td>
                <td id="reg-C"></td>
                <td>SP</td>
                <td id="reg-SP"></td>
                <td>Flags</td>
                <td id="reg-F"></td>
              </tr>
              <tr>
                <td>D</td>
                <td id="reg-D"></td>
                <td>BP</td>
                <td id="reg-BP"></td>
                <td>PC</td>
                <td id="reg-PC"></td>
              </tr>
            </table>

            <table>
              <tr>
                <td>Int.</td>
                <td id="flag-7"></td>
                <td>Mode</td>
                <td id="flag-6"></td>
                <td>eXec</td>
                <td id="flag-5"></td>
                <td>Error</td>
                <td id="flag-4"></td>
              </tr>
              <tr>
                <td>Over</td>
                <td id="flag-3"></td>
                <td>Carry</td>
                <td id="flag-2"></td>
                <td>Neg</td>
                <td id="flag-1"></td>
                <td>Zero</td>
                <td id="flag-0"></td>
              </tr>
            </table>

            <table>
              <tr>
                <td>Inst</td>
                <td id="instructions"></td>
              </tr>
              <tr>
                <td> => </td>
                <td id="disassembly"></td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="secondary vertical panel">
      <div id="control" class="collapsible vertical panel fixed">
        <div class="title">Control</div>
        <div class="toolbar">
          <div class="row">
            <button data-cmd="start">Start</button>
            <button data-cmd="stop">Stop</button>
          </div>
          <div class="row">
            Speed:
            <span id="cpu-speed"></span>
          </div>
          <div class="row">
            <button data-cmd="speed-adjust" data-parm="slowest">|&lt;</button>
            <button data-cmd="speed-adjust" data-parm="slow">&lt;</button>
            <button data-cmd="speed-adjust" data-parm="fast">&gt;</button>
            <button data-cmd="speed-adjust" data-parm="fastest">&gt;|</button>
            <button data-cmd="reporting" data-parm="always">Upd</button>
            <button data-cmd="reporting" data-parm="stop">Nvr</button>
          </div>
          <div class="row">
            <button data-cmd="step">Step</button>
            <button data-cmd="dump-cpu">Dump</button>
            <button data-cmd="reset">Reset</button>
            <button data-cmd="hard-reset">(hard)</button>
          </div>
        </div>
      </div>
      <div class="collapsible vertical panel fixed">
        <div class="title">Keyboard</div>
        <div class="toolbar">
          <div class="row">
            <label>Focus:
              <input id="kbd" type="text" size=1 value="" />
            </label>
          </div>
        </div>
      </div>
      <div class="collapsible vertical panel fixed">
        <button class="maximize" data-cmd="panel-cmd" data-parm="maximize">^</button>
        <button class="minimize" data-cmd="panel-cmd" data-parm="minimize">v</button>
        <button class="normalize" data-cmd="panel-cmd" data-parm="normalize">=</button>
        <div class="title">Memory</div>
        <div id="memory" class="vertical panel">
          <div class="toolbar">
            <div class="row">
              <label>Start:
                <input id="mem-start" type="text" size=7 value="0x00000" />
              </label>
              <label>End:
                <input id="mem-end" type="text" size=7 value="0x00007" />
              </label>
            </div>
            <div class="row">
              <button data-cmd="dump-mem">Dump memory</button>
            </div>
          </div>
          <div id="memory-dump" class="scrollingpre"></div>
        </div>
      </div>
      <div class="collapsible vertical panel">
        <button class="maximize" data-cmd="panel-cmd" data-parm="maximize">^</button>
        <button class="minimize" data-cmd="panel-cmd" data-parm="minimize">v</button>
        <button class="normalize" data-cmd="panel-cmd" data-parm="normalize">=</button>
        <div class="title">Code</div>
        <div id="code" class="vertical panel">
          <div class="toolbar">
            <div class="row">
              <select id="asm-select">
                <option>Select a file</option>
                <optgroup id="saved-asms">
                  <option>None</option>
                </optgroup>
              </select>
              <button data-cmd="load-asm">Load</button>
            </div>
          </div>
          <div class="toolbar">
            <div class="row">
              <input type="file" id="program" />
              <button data-cmd="load-asm-disk">Load</button>
            </div>
          </div>
          <textarea></textarea>
          <div class="toolbar">
            <div class="row">
              <button data-cmd="assemble">Assemble</button>
              <button data-cmd="save-asm">Save</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>